<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Offres de stage</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body {
      background: linear-gradient(135deg, #f5f7fa, #e4ebf5);
    }
    .card {
      border: none;
      border-radius: 15px;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 25px rgba(0,0,0,0.12);
    }
    .badge-sector {
      background-color: #6c757d;
    }
  </style>
</head>

<body>

<div class="container py-5">

  <!-- Messages -->
  {% if messages %}
    <div class="mb-4">
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
      {% endfor %}
    </div>
  {% endif %}

  <!-- Title -->
  <div class="text-center mb-5">
    <h1 class="fw-bold">ğŸ“ Offres de stage disponibles</h1>
    <p class="text-muted">Ø§Ø®ØªØ§Ø± Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù„ÙŠ Ù…Ù†Ø§Ø³Ø¨ Ù„ÙŠÙƒ ÙˆÙ‚Ø¯Ù‘Ù… Ø¹Ù„ÙŠÙ‡ Ù…Ø¨Ø§Ø´Ø±Ø©</p>
  </div>

  {% if offres %}
    <div class="row g-4">
      {% for offre in offres %}
        <div class="col-md-6 col-lg-4">
          <div class="card h-100 shadow-sm">
            <div class="card-body d-flex flex-column">

              <!-- Titre -->
              <h5 class="card-title fw-bold mb-2">{{ offre.titre }}</h5>

              <!-- Entreprise -->
              <p class="mb-1">
                <strong>Entreprise :</strong>
                {{ offre.entreprise.nom }}
              </p>

              {% if offre.entreprise.secteur %}
                <span class="badge badge-sector mb-2">
                  {{ offre.entreprise.secteur }}
                </span>
              {% endif %}

              <!-- Description -->
              <p class="card-text mt-2 text-muted">
                {{ offre.description|truncatechars:130 }}
              </p>

              <!-- Dates -->
              <p class="small text-muted">
                ğŸ“… {{ offre.date_debut }} â†’ {{ offre.date_fin }}
              </p>

              <!-- Infos entreprise -->
              <div class="small text-muted mb-3">
                {% if offre.entreprise.email %}
                  <div>ğŸ“§ {{ offre.entreprise.email }}</div>
                {% endif %}
                {% if offre.entreprise.telephone %}
                  <div>ğŸ“ {{ offre.entreprise.telephone }}</div>
                {% endif %}
                {% if offre.entreprise.site_web %}
                  <div>
                    ğŸŒ
                    <a href="{{ offre.entreprise.site_web }}" target="_blank">
                      Site web
                    </a>
                  </div>
                {% endif %}
              </div>

              <!-- Button -->
              <div class="mt-auto">
                <a class="btn btn-primary w-100"
                   href="{% url 'stages:postuler' offre.id %}">
                  ğŸš€ Postuler
                </a>
              </div>

            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="alert alert-info text-center">
      Ù…Ø§ ÙƒØ§ÙŠÙ†Ø§Ø´ Ø¹Ø±ÙˆØ¶ Ø¯Ø§Ø¨Ø§.
    </div>
  {% endif %}

</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
