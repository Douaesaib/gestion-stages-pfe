<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Offres de stage</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

  <style>
    :root{
      --bg0:#070A12;
      --bg1:#0B1220;
      --card: rgba(17,25,40,.72);
      --card2: rgba(17,25,40,.58);
      --border: rgba(255,255,255,.10);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.65);
      --blue:#3B82F6;
      --green:#22C55E;
    }

    body{
      min-height:100vh;
      background:
        radial-gradient(1200px 600px at 15% 10%, rgba(59,130,246,.22), transparent 55%),
        radial-gradient(900px 500px at 85% 15%, rgba(139,92,246,.20), transparent 60%),
        linear-gradient(180deg,var(--bg0),var(--bg1));
      color:var(--text);
    }

    /* ===== CARD ===== */
    .card{
      border-radius:18px;
      background:linear-gradient(180deg,var(--card),var(--card2));
      border:1px solid var(--border);
      box-shadow:0 14px 40px rgba(0,0,0,.35);
      transition:.25s ease;
    }
    .card:hover{
      transform:translateY(-6px);
      box-shadow:0 22px 55px rgba(0,0,0,.45);
    }

    /* ===== TITLE ===== */
    .stage-title{
      font-size:1.3rem;
      font-weight:900;
      line-height:1.2;
      margin-bottom:12px;
    }

    /* ===== COMPANY ===== */
    .company-bar{
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 14px;
      border-radius:14px;
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      margin-bottom:10px;
    }
    .company-bar i{
      background:rgba(255,255,255,.08);
      border-radius:10px;
      padding:8px;
    }
    .company-name{
      font-weight:800;
      font-size:1.05rem;
    }

    /* ===== META LINE ===== */
    .meta-line{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      font-size:.9rem;
      margin-bottom:14px;
    }
    .meta-item{
      display:flex;
      align-items:center;
      gap:6px;
      padding:6px 10px;
      border-radius:12px;
      background:rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.08);
      color:var(--muted);
    }

    /* GREEN DATE */
    .meta-item.date-green{
      background:rgba(34,197,94,.18);
      border-color:rgba(34,197,94,.28);
      color:#d1ffe1;
      font-weight:700;
    }

    /* ===== DESCRIPTION ===== */
    .description{
      color:var(--muted);
      font-size:.95rem;
      line-height:1.55;
      margin-bottom:16px;
    }

    /* ===== CONTACT ===== */
    .info-row{
      display:flex;
      gap:10px;
      padding:10px 12px;
      border-radius:14px;
      background:rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.08);
      margin-bottom:10px;
    }
    .info-row i{
      background:rgba(59,130,246,.18);
      border-radius:10px;
      padding:8px;
    }
    .info-title{
      font-weight:800;
      font-size:.85rem;
    }
    .info-value{
      font-size:.9rem;
      color:var(--muted);
    }

    /* ===== BUTTON ===== */
    .btn-primary{
      border:none;
      border-radius:14px;
      padding:.85rem;
      font-weight:900;
      background:linear-gradient(135deg,#4f8cff,#7b5cff);
      box-shadow:0 12px 28px rgba(79,140,255,.35);
    }
  </style>
</head>

<body>

<div class="container py-5">
  <div class="row g-4">

    {% for offre in offres %}
    <div class="col-md-6 col-lg-4">
      <div class="card h-100">
        <div class="card-body d-flex flex-column p-4">

          <!-- TITLE -->
          <div class="stage-title">
            <i class="bi bi-briefcase-fill text-info me-2"></i>
            {{ offre.titre }}
          </div>

          <!-- COMPANY -->
          <div class="company-bar">
            <i class="bi bi-building"></i>
            <div class="company-name">{{ offre.entreprise.nom }}</div>
          </div>

          <!-- META -->
          <div class="meta-line">
            {% if offre.entreprise.secteur %}
            <div class="meta-item">
              <i class="bi bi-tag"></i>
              {{ offre.entreprise.secteur }}
            </div>
            {% endif %}

            <div class="meta-item date-green">
              <i class="bi bi-calendar-event"></i>
              {{ offre.date_debut }} â†’ {{ offre.date_fin }}
            </div>
          </div>

          <!-- DESCRIPTION -->
          <div class="description">
            {{ offre.description|truncatechars:140 }}
          </div>

          <!-- CONTACT -->
          {% if offre.entreprise.email %}
          <div class="info-row">
            <i class="bi bi-envelope-fill"></i>
            <div>
              <div class="info-title">Email</div>
              <div class="info-value">{{ offre.entreprise.email }}</div>
            </div>
          </div>
          {% endif %}

          {% if offre.entreprise.telephone %}
          <div class="info-row">
            <i class="bi bi-telephone-fill"></i>
            <div>
              <div class="info-title">TÃ©lÃ©phone</div>
              <div class="info-value">{{ offre.entreprise.telephone }}</div>
            </div>
          </div>
          {% endif %}

          {% if offre.entreprise.site_web %}
          <div class="info-row">
            <i class="bi bi-globe2"></i>
            <div>
              <div class="info-title">Site web</div>
              <div class="info-value">
                <a href="{{ offre.entreprise.site_web }}" target="_blank">
                  Visiter le site <i class="bi bi-box-arrow-up-right"></i>
                </a>
              </div>
            </div>
          </div>
          {% endif %}

          <!-- BUTTON -->
          <div class="mt-auto pt-2">
            <a href="{% url 'stages:postuler' offre.id %}" class="btn btn-primary w-100">
              ðŸš€ Postuler
            </a>
          </div>

        </div>
      </div>
    </div>
    {% endfor %}

  </div>
</div>

</body>
</html>
